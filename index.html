<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>科学发展小镇</title>
  <!-- 引入国内CDN的Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 引入国内CDN的Font Awesome -->
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css">
  
  <script>
    // 配置Tailwind自定义颜色（贴合主题）
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#1E40AF', // 主色调：蓝色（代表科学/可持续）
            secondary: '#16A34A', // 辅助色：绿色（代表生态）
            accent: '#F59E0B', // 强调色：橙色（代表经济活力）
          },
        }
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .decision-card {
        @apply bg-white rounded-xl shadow-md p-5 mb-4 transition-all duration-300 hover:shadow-lg hover:-translate-y-1 cursor-pointer;
      }
      .stat-bar {
        @apply h-3 rounded-full overflow-hidden;
      }
      .stat-fill {
        @apply h-full transition-all duration-1000 ease-out;
      }
    }
  </style>
</head>

<body class="bg-gray-50 min-h-screen">
  <!-- 顶部导航 -->
  <header class="bg-primary text-white p-4 shadow-md">
    <div class="container mx-auto flex justify-between items-center">
      <h1 class="text-xl font-bold"><i class="fa fa-leaf mr-2"></i>科学发展小镇</h1>
      <div id="stage-indicator" class="text-sm">阶段：1/5</div>
    </div>
  </header>

  <!-- 主内容区 -->
  <main class="container mx-auto p-4 max-w-2xl">
    <!-- 状态面板 -->
    <div class="bg-white rounded-xl shadow p-4 mb-6">
      <h2 class="text-lg font-semibold mb-3">小镇发展状态</h2>
      <div class="grid grid-cols-3 gap-4">
        <!-- 经济指数 -->
        <div>
          <div class="flex justify-between items-center mb-1">
            <span class="text-accent text-sm"><i class="fa fa-line-chart mr-1"></i>经济指数</span>
            <span id="economy-value" class="text-sm font-medium">30</span>
          </div>
          <div class="stat-bar bg-gray-200">
            <div id="economy-bar" class="stat-fill bg-accent" style="width: 30%"></div>
          </div>
        </div>
        <!-- 生态指数 -->
        <div>
          <div class="flex justify-between items-center mb-1">
            <span class="text-secondary text-sm"><i class="fa fa-tree mr-1"></i>生态指数</span>
            <span id="ecology-value" class="text-sm font-medium">40</span>
          </div>
          <div class="stat-bar bg-gray-200">
            <div id="ecology-bar" class="stat-fill bg-secondary" style="width: 40%"></div>
          </div>
        </div>
        <!-- 民生指数 -->
        <div>
          <div class="flex justify-between items-center mb-1">
            <span class="text-primary text-sm"><i class="fa fa-users mr-1"></i>民生指数</span>
            <span id="people-value" class="text-sm font-medium">35</span>
          </div>
          <div class="stat-bar bg-gray-200">
            <div id="people-bar" class="stat-fill bg-primary" style="width: 35%"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- 剧情/决策区域 -->
    <div id="game-container">
      <!-- 初始剧情 -->
      <div id="story-section" class="bg-white rounded-xl shadow p-5 mb-6">
        <h2 class="text-xl font-bold mb-3 text-primary">小镇的起点</h2>
        <p class="text-gray-700 mb-4">
          你成为了"科学发展小镇"的新任镇长。这个小镇资源丰富但基础薄弱，当前面临第一个发展选择：如何规划初期产业？
        </p>
        <button id="start-btn" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary/90 transition-colors">
          开始决策
        </button>
      </div>

      <!-- 决策区域（默认隐藏） -->
      <div id="decision-section" class="hidden">
        <h2 id="decision-title" class="text-xl font-bold mb-4 text-primary"></h2>
        <div id="decision-cards" class="space-y-3"></div>
      </div>

      <!-- 结果解读区域（默认隐藏） -->
      <div id="result-section" class="hidden bg-white rounded-xl shadow p-5 mb-6">
        <h2 class="text-xl font-bold mb-3 text-primary">决策影响</h2>
        <div id="result-description" class="text-gray-700 mb-4"></div>
        <div id="theory-explanation" class="bg-blue-50 p-4 rounded-lg border-l-4 border-primary mb-4">
          <h3 class="font-semibold text-primary mb-2">科学发展观解读</h3>
          <p id="theory-text" class="text-sm text-gray-700"></p>
        </div>
        <button id="next-btn" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary/90 transition-colors">
          进入下一阶段
        </button>
      </div>

      <!-- 最终结果（默认隐藏） -->
      <div id="final-result" class="hidden bg-white rounded-xl shadow p-5 mb-6">
        <h2 class="text-2xl font-bold mb-4 text-primary text-center">小镇发展总结</h2>
        <div class="text-center mb-6">
          <div class="inline-block p-4 rounded-full bg-primary/10 mb-2">
            <i class="fa fa-trophy text-4xl text-accent"></i>
          </div>
          <h3 id="final-score" class="text-xl font-bold"></h3>
        </div>
        <div id="final-evaluation" class="text-gray-700 mb-6"></div>
        <button id="restart-btn" class="w-full bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary/90 transition-colors">
          重新体验
        </button>
      </div>
    </div>
  </main>

  <!-- 页脚 -->
  <footer class="bg-gray-800 text-white p-4 mt-8">
    <div class="container mx-auto text-center text-sm">
      <p>毛概第八章-科学发展观 小组作业</p>
    </div>
  </footer>

  <script>
    // 游戏数据
    const gameData = {
      stage: 1,
      maxStages: 5,
      stats: {
        economy: 30,
        ecology: 40,
        people: 35
      },
      // 决策场景配置（每个阶段的决策选项）
      scenarios: [
        {
          title: "初期产业选择",
          description: "小镇需要发展基础产业，你会优先发展哪类产业？",
          decisions: [
            {
              text: "大力发展高污染工厂（短期经济效益高）",
              effects: { economy: +30, ecology: -40, people: +10 },
              result: "工厂带来了快速的经济增长，但河水变黑、空气变差，居民抱怨增多。",
              theory: "科学发展观要求'全面协调可持续'，单纯追求经济增长而忽视生态保护，会导致发展不可持续。"
            },
            {
              text: "发展生态农业（经济效益中等，保护生态）",
              effects: { economy: +15, ecology: +10, people: +15 },
              result: "生态农业稳步发展，环境保持良好，居民生活逐步改善。",
              theory: "这体现了'统筹兼顾'的方法，在发展经济的同时兼顾生态保护和民生改善，符合科学发展理念。"
            },
            {
              text: "优先建设学校和医院（短期经济收益低）",
              effects: { economy: -5, ecology: +5, people: +30 },
              result: "民生设施得到改善，居民满意度提高，但缺乏产业支撑，财政压力增大。",
              theory: "'以人为本'是科学发展观的核心，但发展是基础，需在保障民生的同时兼顾经济发展。"
            }
          ]
        },
        {
          title: "资源开发决策",
          description: "小镇发现了一处矿产资源，如何开发？",
          decisions: [
            {
              text: "全面开采，吸引外地企业投资",
              effects: { economy: +40, ecology: -30, people: +5 },
              result: "矿产开采带来了大量税收，但植被破坏严重，本地居民受益有限。",
              theory: "科学发展观强调发展的'全面性'，资源开发需兼顾生态保护和本地居民利益，避免片面发展。"
            },
            {
              text: "限量开采，配套污染治理设施",
              effects: { economy: +20, ecology: -5, people: +10 },
              result: "资源有序开发，污染得到控制，财政收入稳定增长。",
              theory: "这体现了'可持续'的基本要求，在开发资源的同时注重环境保护，为长远发展留下空间。"
            },
            {
              text: "放弃开采，发展旅游业",
              effects: { economy: +10, ecology: +30, people: +20 },
              result: "生态环境保持完好，旅游业逐渐兴起，居民生活质量提升。",
              theory: "发展的'第一要义'是发展，但发展方式可以多样化，选择绿色发展路径符合科学发展观。"
            }
          ]
        },
        {
          title: "城市扩张规划",
          description: "小镇人口增长，需要扩大城区，如何规划？",
          decisions: [
            {
              text: "占用耕地建设新城区",
              effects: { economy: +25, ecology: -20, people: +15 },
              result: "城区快速扩张，住房问题解决，但耕地减少，粮食自给率下降。",
              theory: "'统筹兼顾'要求协调城乡发展、人与自然和谐发展，牺牲耕地换取扩张不符合科学发展。"
            },
            {
              text: "建设卫星镇，保留耕地和绿地",
              effects: { economy: +15, ecology: +15, people: +20 },
              result: "城市有序扩张，生态空间得到保护，居民生活环境良好。",
              theory: "这符合'全面协调可持续'的要求，实现了城市发展与资源保护的平衡。"
            },
            {
              text: "限制人口流入，维持现状",
              effects: { economy: -10, ecology: +5, people: -10 },
              result: "城市压力小，但发展停滞，年轻人外流，经济活力下降。",
              theory: "发展是解决问题的关键，科学发展观要求通过发展解决矛盾，而非消极维持现状。"
            }
          ]
        },
        {
          title: "产业升级选择",
          description: "小镇经济需要转型升级，重点发展什么？",
          decisions: [
            {
              text: "发展高新技术产业",
              effects: { economy: +30, ecology: +10, people: +15 },
              result: "产业技术含量提升，污染减少，高收入岗位增加，但对人才要求高。",
              theory: "科学发展观要求转变发展方式，推动产业升级，实现高质量发展，这是发展的必然选择。"
            },
            {
              text: "继续巩固传统制造业",
              effects: { economy: +10, ecology: -15, people: +5 },
              result: "产业稳定但增长缓慢，污染问题持续，就业质量不高。",
              theory: "忽视发展的'全面性'和'可持续性'，固守传统模式会导致发展后劲不足。"
            },
            {
              text: "发展文化创意和乡村旅游",
              effects: { economy: +20, ecology: +25, people: +25 },
              result: "特色产业形成，生态价值转化为经济价值，居民幸福感提升。",
              theory: "这体现了'以人为本'和'可持续'的统一，通过发挥本地优势实现协调发展。"
            }
          ]
        },
        {
          title: "公共服务投入",
          description: "财政盈余后，如何分配公共服务投入？",
          decisions: [
            {
              text: "重点投入教育和医疗",
              effects: { economy: +5, ecology: +5, people: +40 },
              result: "居民素质和健康水平提升，长期发展潜力增强，但短期经济拉动有限。",
              theory: "'以人为本'是科学发展观的核心，教育和医疗是民生之本，优先保障民生符合发展目的。"
            },
            {
              text: "平衡投入经济、生态和民生",
              effects: { economy: +20, ecology: +20, people: +20 },
              result: "经济持续增长，环境不断改善，居民生活稳步提高，实现协调发展。",
              theory: "这正是'统筹兼顾'根本方法的体现，实现经济、社会、生态效益的统一，是科学发展的典范。"
            },
            {
              text: "投入基础设施建设拉动经济",
              effects: { economy: +35, ecology: -5, people: +10 },
              result: "基建带动经济增长，但民生改善滞后，出现过度投资现象。",
              theory: "科学发展观要求避免盲目投资，需协调好投资与民生、经济与社会的关系。"
            }
          ]
        }
      ]
    };

    // DOM元素
    const elements = {
      stageIndicator: document.getElementById('stage-indicator'),
      economyValue: document.getElementById('economy-value'),
      economyBar: document.getElementById('economy-bar'),
      ecologyValue: document.getElementById('ecology-value'),
      ecologyBar: document.getElementById('ecology-bar'),
      peopleValue: document.getElementById('people-value'),
      peopleBar: document.getElementById('people-bar'),
      storySection: document.getElementById('story-section'),
      startBtn: document.getElementById('start-btn'),
      decisionSection: document.getElementById('decision-section'),
      decisionTitle: document.getElementById('decision-title'),
      decisionCards: document.getElementById('decision-cards'),
      resultSection: document.getElementById('result-section'),
      resultDescription: document.getElementById('result-description'),
      theoryText: document.getElementById('theory-text'),
      nextBtn: document.getElementById('next-btn'),
      finalResult: document.getElementById('final-result'),
      finalScore: document.getElementById('final-score'),
      finalEvaluation: document.getElementById('final-evaluation'),
      restartBtn: document.getElementById('restart-btn')
    };

    // 更新状态显示
    function updateStats() {
      elements.economyValue.textContent = gameData.stats.economy;
      elements.economyBar.style.width = `${gameData.stats.economy}%`;
      elements.ecologyValue.textContent = gameData.stats.ecology;
      elements.ecologyBar.style.width = `${gameData.stats.ecology}%`;
      elements.peopleValue.textContent = gameData.stats.people;
      elements.peopleBar.style.width = `${gameData.stats.people}%`;
    }

    // 显示决策场景
    function showDecisionScene() {
      const scenario = gameData.scenarios[gameData.stage - 1];
      elements.decisionTitle.textContent = scenario.title;
      elements.decisionCards.innerHTML = '';

      // 创建决策卡片
      scenario.decisions.forEach((decision, index) => {
        const card = document.createElement('div');
        card.className = 'decision-card';
        card.innerHTML = `
          <p class="text-gray-700">${decision.text}</p>
          <div class="mt-3 grid grid-cols-3 gap-2 text-xs">
            <div class="flex items-center ${decision.effects.economy >= 0 ? 'text-accent' : 'text-red-500'}">
              <i class="fa fa-line-chart mr-1"></i>
              ${decision.effects.economy >= 0 ? '+' : ''}${decision.effects.economy}
            </div>
            <div class="flex items-center ${decision.effects.ecology >= 0 ? 'text-secondary' : 'text-red-500'}">
              <i class="fa fa-tree mr-1"></i>
              ${decision.effects.ecology >= 0 ? '+' : ''}${decision.effects.ecology}
            </div>
            <div class="flex items-center ${decision.effects.people >= 0 ? 'text-primary' : 'text-red-500'}">
              <i class="fa fa-users mr-1"></i>
              ${decision.effects.people >= 0 ? '+' : ''}${decision.effects.people}
            </div>
          </div>
        `;
        card.addEventListener('click', () => makeDecision(decision));
        elements.decisionCards.appendChild(card);
      });

      // 显示决策区域
      elements.storySection.classList.add('hidden');
      elements.decisionSection.classList.remove('hidden');
    }

    // 做出决策
    function makeDecision(decision) {
      // 更新数据
      gameData.stats.economy = Math.max(0, Math.min(100, gameData.stats.economy + decision.effects.economy));
      gameData.stats.ecology = Math.max(0, Math.min(100, gameData.stats.ecology + decision.effects.ecology));
      gameData.stats.people = Math.max(0, Math.min(100, gameData.stats.people + decision.effects.people));
      updateStats();

      // 显示结果
      elements.resultDescription.textContent = decision.result;
      elements.theoryText.textContent = decision.theory;
      elements.decisionSection.classList.add('hidden');
      elements.resultSection.classList.remove('hidden');
    }

    // 进入下一阶段
    function nextStage() {
      gameData.stage++;
      elements.stageIndicator.textContent = `阶段：${gameData.stage}/${gameData.maxStages}`;

      if (gameData.stage > gameData.maxStages) {
        // 显示最终结果
        showFinalResult();
      } else {
        // 进入下一阶段决策
        elements.resultSection.classList.add('hidden');
        showDecisionScene();
      }
    }

    // 显示最终结果
    function showFinalResult() {
      const totalScore = Math.round((gameData.stats.economy + gameData.stats.ecology + gameData.stats.people) / 3);
      elements.finalScore.textContent = `综合评分：${totalScore}分`;

      // 生成评价
      let evaluation = '';
      if (totalScore >= 80) {
        evaluation = "你的小镇实现了经济、生态、民生的协调发展，完美践行了科学发展观的要求！小镇居民幸福感强，发展潜力巨大。";
      } else if (totalScore >= 60) {
        evaluation = "你的小镇发展总体良好，但在某些方面存在失衡。通过更好地统筹兼顾经济、生态和民生，可实现更科学的发展。";
      } else {
        evaluation = "你的小镇发展存在明显失衡，可能过度侧重某一方面而忽视了其他领域。需要深入理解科学发展观，实现全面协调可持续发展。";
      }
      elements.finalEvaluation.textContent = evaluation;

      elements.resultSection.classList.add('hidden');
      elements.finalResult.classList.remove('hidden');
    }

    // 重新开始游戏
    function restartGame() {
      gameData.stage = 1;
      gameData.stats = { economy: 30, ecology: 40, people: 35 };
      elements.stageIndicator.textContent = `阶段：1/5`;
      updateStats();
      elements.finalResult.classList.add('hidden');
      elements.storySection.classList.remove('hidden');
    }

    // 初始化事件监听
    function initEvents() {
      elements.startBtn.addEventListener('click', showDecisionScene);
      elements.nextBtn.addEventListener('click', nextStage);
      elements.restartBtn.addEventListener('click', restartGame);
    }

    // 初始化游戏
    function initGame() {
      updateStats();
      initEvents();
    }

    // 启动游戏
    window.onload = initGame;
  </script>
</body>
</html>